{
  "meta": {
    "instanceId": "hr-automation-workflow-v1.0"
  },
  "name": "Complete HR Automation System",
  "nodes": [
    {
      "id": "node-start-form",
      "name": "Job Posting Form",
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 1.1,
      "position": [200, 300],
      "parameters": {
        "formTitle": "HR Job Posting System",
        "formDescription": "Create a new job posting with automated recruitment pipeline",
        "responseMode": "responseNode",
        "formFields": {
          "values": [
            {
              "fieldLabel": "Company Name",
              "fieldType": "text",
              "requiredField": true,
              "fieldOptions": {}
            },
            {
              "fieldLabel": "Job Title",
              "fieldType": "text", 
              "requiredField": true,
              "fieldOptions": {}
            },
            {
              "fieldLabel": "Job Description",
              "fieldType": "textarea",
              "requiredField": true,
              "fieldOptions": {
                "rows": 5
              }
            },
            {
              "fieldLabel": "Resume Collection Limit Type",
              "fieldType": "dropdown",
              "requiredField": true,
              "fieldOptions": {
                "values": [
                  {
                    "option": "Number limit",
                    "value": "number"
                  },
                  {
                    "option": "Time limit",
                    "value": "time"
                  }
                ]
              }
            },
            {
              "fieldLabel": "Resume Limit Number",
              "fieldType": "number",
              "requiredField": false,
              "fieldOptions": {
                "defaultValue": 1000
              }
            },
            {
              "fieldLabel": "Time Limit (Days)",
              "fieldType": "number", 
              "requiredField": false,
              "fieldOptions": {
                "defaultValue": 7
              }
            }
          ]
        }
      }
    },
    {
      "id": "node-store-job",
      "name": "Store Job Details",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [400, 300],
      "parameters": {
        "functionCode": "// Store job details in local JSON database\
const fs = require('fs');\
const path = require('path');\
\
// Create job object\
const jobData = {\
  job_id: `job_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\
  company_name: $input.first().json.data['Company Name'],\
  job_title: $input.first().json.data['Job Title'],\
  job_description: $input.first().json.data['Job Description'],\
  limit_type: $input.first().json.data['Resume Collection Limit Type'],\
  limit_value: $input.first().json.data['Resume Collection Limit Type'] === 'number' ? \
    $input.first().json.data['Resume Limit Number'] || 1000 : \
    $input.first().json.data['Time Limit (Days)'] || 7,\
  status: 'active',\
  created_date: new Date().toISOString(),\
  resume_count: 0,\
  candidates: []\
};\
\
// Store in jobs.json file\
const jobsPath = '/tmp/jobs.json';\
let jobs = [];\
\
try {\
  if (fs.existsSync(jobsPath)) {\
    jobs = JSON.parse(fs.readFileSync(jobsPath, 'utf8'));\
  }\
} catch (error) {\
  console.log('Creating new jobs file');\
  jobs = [];\
}\
\
jobs.push(jobData);\
fs.writeFileSync(jobsPath, JSON.stringify(jobs, null, 2));\
\
// Create resumes directory if it doesn't exist\
const resumesDir = `/tmp/resumes/${jobData.job_id}`;\
if (!fs.existsSync('/tmp/resumes')) {\
  fs.mkdirSync('/tmp/resumes', { recursive: true });\
}\
if (!fs.existsSync(resumesDir)) {\
  fs.mkdirSync(resumesDir, { recursive: true });\
}\
\
return [{\
  json: {\
    success: true,\
    job_id: jobData.job_id,\
    message: 'Job details stored successfully',\
    jobData: jobData\
  }\
}];"
      }
    },
    {
      "id": "node-linkedin-post",
      "name": "Post Job to LinkedIn",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [600, 300],
      "parameters": {
        "url": "https://api.linkedin.com/v2/posts",
        "method": "POST",
        "authentication": "generic",
        "genericAuthType": "httpHeaderAuth",
        "httpHeaderAuth": {
          "name": "Authorization",
          "value": "Bearer LINKEDIN_ACCESS_TOKEN_PLACEHOLDER"
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyContentType": "json",
        "jsonBody": "{\
  \\"author\\": \\"urn:li:organization:COMPANY_ID_PLACEHOLDER\\",\
  \\"lifecycleState\\": \\"PUBLISHED\\",\
  \\"specificContent\\": {\
    \\"com.linkedin.ugc.ShareContent\\": {\
      \\"shareCommentary\\": {\
        \\"text\\": \\"ðŸš€ We're hiring! {{$json.jobData.job_title}} at {{$json.jobData.company_name}}\\\
\\\
{{$json.jobData.job_description}}\\\
\\\
#hiring #jobs #career\\"\
      },\
      \\"shareMediaCategory\\": \\"NONE\\"\
    }\
  },\
  \\"visibility\\": {\
    \\"com.linkedin.ugc.MemberNetworkVisibility\\": \\"PUBLIC\\"\
  }\
}",
        "options": {
          "timeout": 10000,
          "retry": {
            "enabled": true,
            "maxAttempts": 3
          }
        }
      }
    },
    {
      "id": "node-groq-analysis",
      "name": "Groq Resume Analysis",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [800, 900],
      "parameters": {
        "url": "https://api.groq.com/openai/v1/chat/completions",
        "method": "POST",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer GROQ_API_KEY_PLACEHOLDER"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyContentType": "json",
        "jsonBody": "{\
  \\"model\\": \\"llama3-8b-8192\\",\
  \\"messages\\": [\
    {\
      \\"role\\": \\"system\\",\
      \\"content\\": \\"You are an expert ATS system. Analyze resumes and provide JSON response with: skills, experience_years, education_level, keywords_found, technical_skills, soft_skills, certifications\\"\
    },\
    {\
      \\"role\\": \\"user\\",\
      \\"content\\": \\"Analyze this resume for ATS scoring: {{$json.candidates[0].resume_text}}\\"\
    }\
  ],\
  \\"temperature\\": 0.1,\
  \\"max_tokens\\": 1000\
}",
        "options": {
          "timeout": 30000,
          "retry": {
            "enabled": true,
            "maxAttempts": 3
          }
        }
      }
    },
    {
      "id": "node-retell-interview",
      "name": "Retell Voice Interview",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [800, 1500],
      "parameters": {
        "url": "https://api.retellai.com/call",
        "method": "POST",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer RETELL_API_KEY_PLACEHOLDER"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyContentType": "json",
        "jsonBody": "{\
  \\"from_number\\": \\"+1234567890\\",\
  \\"to_number\\": \\"{{$json.interviews[0].candidate_phone}}\\",\
  \\"agent_id\\": \\"agent_hr_interviewer\\",\
  \\"metadata\\": {\
    \\"candidate_id\\": \\"{{$json.interviews[0].candidate_id}}\\",\
    \\"interview_id\\": \\"{{$json.interviews[0].interview_id}}\\",\
    \\"candidate_name\\": \\"{{$json.interviews[0].candidate_name}}\\"\
  }\
}",
        "options": {
          "timeout": 30000,
          "retry": {
            "enabled": true,
            "maxAttempts": 2
          }
        }
      }
    },
    {
      "id": "node-smtp-email",
      "name": "SMTP Email Sender",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [800, 1100],
      "parameters": {
        "smtpHost": "smtp.gmail.com",
        "smtpPort": 587,
        "smtpUser": "YOUR_GMAIL_ADDRESS",
        "smtpPassword": "YOUR_APP_PASSWORD",
        "fromEmail": "YOUR_GMAIL_ADDRESS",
        "toEmail": "={{$json.email}}",
        "subject": "HR Recruitment Update",
        "emailFormat": "html",
        "message": "<h1>Thank you for your application</h1><p>We have received your application and will be in touch soon.</p>"
      }
    }
  ],
  "connections": {
    "Job Posting Form": {
      "main": [
        [
          {
            "node": "Store Job Details",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Store Job Details": {
      "main": [
        [
          {
            "node": "Post Job to LinkedIn",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-01-27T10:00:00.000Z",
  "versionId": "hr-automation-v1.0"
}
