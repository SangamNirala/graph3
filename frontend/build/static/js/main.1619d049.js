/*! For license information please see main.1619d049.js.LICENSE.txt */
(()=>{var e={628:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(0===n.length)return!0;var a=e.name||"",r=(e.type||"").toLowerCase(),i=r.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?a.toLowerCase().endsWith(t):t.endsWith("/*")?i===t.replace(/\/.*$/,""):r===t}))}return!0}},497:(e,t,n)=>{"use strict";var a=n(218);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,l){if(l!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4:(e,t,n)=>{"use strict";var a=n(853),r=n(43),i=n(950);function l(e){var t="https://fb94d99b-4b3b-4c52-8a8d-45c283b3e206.preview.emergentagent.com","/api");const me=function(){const[t,n]=(0,e.useState)("upload"),[a,r]=(0,e.useState)(null),[i,l]=(0,e.useState)(null),[s,c]=(0,e.useState)({}),[u,p]=(0,e.useState)(null),[d,f]=(0,e.useState)(null),[m,v]=(0,e.useState)(null),[h,g]=(0,e.useState)(!1),[b,y]=(0,e.useState)(!1),x=(0,e.useRef)(!1),[w,k]=(0,e.useState)(50),[S,j]=(0,e.useState)([]),[E,N]=(0,e.useState)(null),[C,z]=(0,e.useState)({current_ph:7,target_ph:7.6,status:"Connected"}),[_,P]=(0,e.useState)(7.6),[T,O]=(0,e.useState)(!1),[D,L]=(0,e.useState)([]),[A,F]=(0,e.useState)([]),[R,M]=(0,e.useState)(67),[I,U]=(0,e.useState)([]),[q,H]=(0,e.useState)(Date.now()),[B,V]=(0,e.useState)([]),[$,W]=(0,e.useState)(!0),Q=e=>{e&&e.predictions&&F((t=>{const n=[...t,...e.predictions].slice(-w);if($&&t.length>0&&n.length>5){const e=Math.min(3,Math.floor(.1*n.length));for(let t=0;t<e&&t<n.length-1;t++){const a=(t+1)/(e+1),r=n.length-e+t;r>0&&(n[r]=n[r-1]*(1-a)+n[r]*a)}}return n}))},[K,G]=(0,e.useState)([]),[Y,X]=(0,e.useState)(null),[J,Z]=(0,e.useState)(null),[ee,te]=(0,e.useState)(!1),[ne,ae]=(0,e.useState)(null),[re,ie]=(0,e.useState)(!1),[le,oe]=(0,e.useState)({show:!1,message:"",type:"info"}),se=function(e){oe({show:!0,message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info"}),setTimeout((()=>oe({show:!1,message:"",type:"info"})),5e3)};(0,e.useEffect)((()=>{("true"===new URLSearchParams(window.location.search).get("test")||"localhost"===window.location.hostname)&&(()=>{n(3),p("test-model");const e=xe(7.6,30);U(e);const t=Array.from({length:24},((e,t)=>7+.3*Math.sin(.5*t)));f({values:t}),console.log("\u2705 Test mode initialized - Dashboard ready")})()}),[]);const ue=(0,e.useCallback)((async e=>{const t=e[0];if(!t)return;if(!["text/csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(t.type)&&!t.name.match(/\.(csv|xlsx|xls)$/i))return void se("Unsupported file type. Please upload CSV (.csv) or Excel (.xlsx, .xls) files only.","error");if(t.size>52428800)return void se("File too large. Please upload files smaller than 50MB.","error");const a=new FormData;a.append("file",t);try{const e=await fetch("".concat(fe,"/upload-data"),{method:"POST",body:a});if(e.ok){const t=await e.json();r(t),l(t.analysis),c(t.analysis.suggested_parameters),n("parameters"),se("File uploaded successfully!","success")}else{let n="Error uploading file";try{const t=await e.json();t.detail?n="Upload failed: ".concat(t.detail):t.error?n="Upload failed: ".concat(t.error):t.message&&(n="Upload failed: ".concat(t.message))}catch(i){n="Upload failed: HTTP ".concat(e.status," - ").concat(e.statusText)}se(n,"error"),console.error("Upload failed:",{status:e.status,statusText:e.statusText,file:t.name,fileSize:t.size,fileType:t.type})}}catch(o){console.error("Upload error:",o);let e="Error uploading file";e="TypeError"===o.name&&o.message.includes("fetch")?"Network error: Unable to connect to server. Please check your internet connection.":"TypeError"===o.name&&o.message.includes("JSON")?"Server response error: Invalid response format.":o.message.includes("timeout")?"Upload timeout: File upload took too long. Please try with a smaller file.":o.message.includes("abort")?"Upload cancelled: File upload was interrupted.":"Upload failed: ".concat(o.message),se(e,"error")}}),[se]),pe=async()=>{try{const e=await fetch("".concat(fe,"/model-comparison"));if(e.ok){const t=await e.json();ae(t)}}catch(e){console.error("Error comparing models:",e)}},me=async()=>{try{const e=await fetch("".concat(fe,"/enhanced-pattern-analysis"));if(e.ok){const t=await e.json();return console.log("Enhanced pattern analysis:",t),t.recommendations&&t.recommendations.insights&&console.log("Pattern Analysis Insights:",t.recommendations.insights),t}}catch(e){console.error("Error loading enhanced pattern analysis:",e)}return null};(0,e.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(fe,"/supported-models"));if(e.ok){const t=await e.json();G(t)}}catch(e){console.error("Error loading supported models:",e)}})()}),[]),(0,e.useEffect)((()=>{a&&(async()=>{try{const e=await fetch("".concat(fe,"/data-quality-report"));if(e.ok){const t=await e.json();Z(t)}}catch(e){console.error("Error loading data quality report:",e)}})()}),[a]),(0,e.useEffect)((()=>{u&&"prediction"===t&&(async()=>{try{const e=await fetch("".concat(fe,"/model-performance"));if(e.ok){const t=await e.json();X(t)}}catch(e){console.error("Error loading model performance:",e)}})()}),[u,t]);const{getRootProps:ve,getInputProps:he,isDragActive:ge}=ce({onDrop:ue,accept:{"text/csv":[".csv"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"]},multiple:!1}),be=async()=>{if(a&&s.time_column&&s.target_column)if(s.time_column!==s.target_column){g(!0);try{const l=await fetch("".concat(fe,"/train-model?data_id=").concat(a.data_id,"&model_type=").concat(s.model_type),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(l.ok){const a=await l.json();if(p(a.model_id),n("prediction"),a.performance_metrics){var e,t,r;const n=a.performance_metrics;se("Model trained successfully! Performance Grade: ".concat(a.evaluation_grade,", RMSE: ").concat((null===(e=n.rmse)||void 0===e?void 0:e.toFixed(4))||"N/A",", MAE: ").concat((null===(t=n.mae)||void 0===t?void 0:t.toFixed(4))||"N/A",", R\xb2: ").concat((null===(r=n.r2)||void 0===r?void 0:r.toFixed(4))||"N/A"),"success")}else se("Model trained successfully!","success");await ke()}else{let e="Training failed";try{const t=await l.json();t.detail?e="Training failed: ".concat(t.detail):t.error?e="Training failed: ".concat(t.error):t.message&&(e="Training failed: ".concat(t.message))}catch(i){e="Training failed: HTTP ".concat(l.status," - ").concat(l.statusText)}se(e,"error"),console.error("Training failed:",{status:l.status,statusText:l.statusText,modelType:s.model_type,dataId:a.data_id})}}catch(l){console.error("Training error:",l);let e="Training failed";e="TypeError"===l.name&&l.message.includes("fetch")?"Network error: Unable to connect to server. Please check your internet connection.":"TypeError"===l.name&&l.message.includes("JSON")?"Server response error: Invalid response format.":l.message.includes("timeout")?"Training timeout: Model training took too long. Please try with a smaller dataset.":l.message.includes("abort")?"Training cancelled: Model training was interrupted.":"Training failed: ".concat(l.message),se(e,"error")}finally{g(!1)}}else se("Invalid column selection: Time column and target column cannot be the same. Please select different columns.","error");else se("Missing required fields: Please select both time and target columns","error")},ye=async()=>{try{const e=await fetch("".concat(fe,"/ph-simulation-history?hours=24"));if(e.ok){const t=await e.json();z(t),L(t.data.slice(-100))}}catch(e){console.error("Error loading pH simulation:",e)}},xe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;const n=Date.now()-q;if(n>3e3)return Array(t).fill(e);const a=[];for(let r=0;r<t;r++){const i=r/(t-1);let l;if(n<1e3){const t=Math.max(.5,Math.abs(e-7)),n=.4,a=Math.exp(2*-i);l=e+Math.sin(r*n)*t*a}else{const t=(n-1e3)/2e3,a=.2*(1-t);l=e+Math.sin(.2*r)*a+.1*(Math.random()-.5)*(1-t)}a.push(Math.max(0,Math.min(14,l)))}return a},we=async()=>{if(!u)return console.error("No model available for continuous predictions"),null;try{const a=await fetch("".concat(fe,"/generate-enhanced-realtime-prediction?steps=30&time_window=").concat(w,"&maintain_patterns=true"));if(a.ok){var e,t;const n=await a.json();return console.log("Enhanced real-time prediction result:",n),console.log("Pattern following score:",null===(e=n.metadata)||void 0===e?void 0:e.pattern_following_score),console.log("Continuity score:",null===(t=n.metadata)||void 0===t?void 0:t.continuity_score),n}const r=await fetch("".concat(fe,"/generate-advanced-ph-prediction?steps=30&maintain_patterns=true"));if(r.ok){const e=await r.json();return console.log("Advanced pH prediction result:",e),e}const i=await fetch("".concat(fe,"/generate-enhanced-continuous-prediction?model_id=").concat(u,"&steps=30&time_window=").concat(w));if(i.ok){const e=await i.json();return console.log("Enhanced prediction result:",e),e}const l=await fetch("".concat(fe,"/generate-continuous-prediction?model_id=").concat(u,"&steps=30&time_window=").concat(w));if(l.ok){return await l.json()}console.error("Continuous prediction failed:",{status:l.status,statusText:l.statusText,modelId:u,timeWindow:w});try{const e=await l.json();console.error("Error details:",e)}catch(n){console.error("Could not parse error response")}}catch(a){console.error("Error generating continuous predictions:",a),console.error("Continuous prediction error details:",{errorName:a.name,errorMessage:a.message,modelId:u,timeWindow:w})}return null},ke=async()=>{try{const e=await fetch("".concat(fe,"/historical-data"));if(e.ok){const t=await e.json();f(t)}}catch(e){console.error("Error loading historical data:",e)}};(0,e.useEffect)((()=>{b&&m&&(async()=>{if(b){const e=await we();e&&e.predictions&&(v(e),Q(e))}})()}),[w]),(0,e.useEffect)((()=>{H(Date.now());const e=()=>{const e=xe(_,w);U(e)};e();const t=setInterval((()=>{e()}),200),n=setTimeout((()=>{clearInterval(t);const e=xe(_,w);U(e)}),5e3);return()=>{clearInterval(t),clearTimeout(n)}}),[_,w]);const Se=t=>{let{data:n,title:a,color:r="#3B82F6",showAnimation:i=!1,currentValue:l=null,smoothLevel:o="high"}=t;const s=e.useRef(null),[c,u]=e.useState(0),[p,d]=e.useState([]),f=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3;if(!(t.length<2)){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let a=0;a<t.length-1;a++){const r=t[a].x+(t[a+1].x-t[a].x)*n,i=t[a].y+(t[a+1].y-t[a].y)*n,l=t[a+1].x-(t[a+1].x-t[a].x)*n,o=t[a+1].y-(t[a+1].y-t[a].y)*n;0===a?e.quadraticCurveTo(r,i,t[a+1].x,t[a+1].y):e.bezierCurveTo(r,i,l,o,t[a+1].x,t[a+1].y)}}};return e.useEffect((()=>{if(!n||!s.current)return;const e=s.current,t=e.getContext("2d"),u=e.width,p=e.height;t.clearRect(0,0,u,p);const d=t.createLinearGradient(0,0,0,p);d.addColorStop(0,"rgba(59, 130, 246, 0.1)"),d.addColorStop(1,"rgba(59, 130, 246, 0.05)"),t.fillStyle=d,t.fillRect(0,0,u,p),t.strokeStyle="#e5e7eb",t.lineWidth=1,t.setLineDash([2,2]);for(let n=0;n<=10;n++){const e=50+n/10*(u-100),a=50+n/10*(p-100);t.beginPath(),t.moveTo(e,50),t.lineTo(e,p-50),t.stroke(),t.beginPath(),t.moveTo(50,a),t.lineTo(u-50,a),t.stroke()}t.setLineDash([]),t.strokeStyle="#374151",t.lineWidth=2,t.beginPath(),t.moveTo(50,p-50),t.lineTo(u-50,p-50),t.moveTo(50,50),t.lineTo(50,p-50),t.stroke();let m=[];if(Array.isArray(n)?m=n:n&&n.values?m=n.values:n&&n.predictions&&(m=n.predictions),m=m.filter((e=>null!==e&&void 0!==e&&!isNaN(e))),console.log("Enhanced PhChart rendering values:",m.length,"data points:",m.slice(0,5)),m&&m.length>0){const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"high";if(!e||e.length<3)return e;const n=[...e];switch(t){case"high":for(let e=0;e<2;e++)for(let t=1;t<n.length-1;t++)n[t]=.25*n[t-1]+.5*n[t]+.25*n[t+1];break;case"medium":for(let e=1;e<n.length-1;e++)n[e]=.2*n[e-1]+.6*n[e]+.2*n[e+1];break;case"low":for(let e=1;e<n.length-1;e++)n[e]=.1*n[e-1]+.8*n[e]+.1*n[e+1]}return n}(m,o),n=Math.max(...e),a=Math.min(...e),l=n-a||1;console.log("Enhanced PhChart range:",{minVal:a,maxVal:n,range:l,smoothLevel:o});const s=e.map(((t,n)=>({x:50+n/Math.max(e.length-1,1)*(u-100),y:p-50-(t-a)/l*(p-100)}))),d=(e=>{if(e.length<2)return e;const t=[];for(let n=0;n<e.length-1;n++){t.push(e[n]);const a=3;for(let r=1;r<a;r++){const i=r/a,l={x:e[n].x+i*(e[n+1].x-e[n].x),y:e[n].y+i*(e[n+1].y-e[n].y)};t.push(l)}}return t.push(e[e.length-1]),t})(s);if(function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.3;if(t.length<2)return;e.fillStyle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;const n=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return"rgba(".concat(n,", ").concat(a,", ").concat(r,", ").concat(t,")")}(n,a),e.beginPath(),e.moveTo(t[0].x,e.canvas.height-50),e.lineTo(t[0].x,t[0].y),f(e,t,.2),e.lineTo(t[t.length-1].x,e.canvas.height-50),e.closePath(),e.fill()}(t,d,r,.3),t.strokeStyle=r,t.lineWidth=3,t.lineCap="round",t.lineJoin="round",t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high",f(t,s,.3),t.stroke(),t.fillStyle=r,t.globalAlpha=.7,s.forEach(((e,n)=>{n%2!==0&&n!==s.length-1||(t.beginPath(),t.arc(e.x,e.y,2,0,2*Math.PI),t.fill())})),t.globalAlpha=1,i&&b&&s.length>0){const e=4+2*Math.sin(.08*c),n=s[s.length-1];t.shadowColor="#10B981",t.shadowBlur=10,t.strokeStyle="#10B981",t.lineWidth=2,t.beginPath(),t.arc(n.x,n.y,e,0,2*Math.PI),t.stroke(),t.shadowBlur=0}}else t.fillStyle="#9CA3AF",t.font="14px Arial",t.textAlign="center",t.fillText("No data available",u/2,p/2);t.fillStyle="#1f2937",t.font="bold 16px Arial",t.textAlign="center",t.fillText(a,u/2,25),null!==l&&(t.fillStyle="#059669",t.font="bold 14px Arial",t.textAlign="right",t.fillText("Current: ".concat(l),u-60,45)),"medium"!==o&&(t.fillStyle="#6B7280",t.font="10px Arial",t.textAlign="left",t.fillText("Smooth: ".concat(o),60,p-15))}),[n,a,r,i,c,b,l,o]),e.useEffect((()=>{let e;if(i&&b){const t=()=>{u((e=>e+1)),e=requestAnimationFrame(t)};e=requestAnimationFrame(t)}return()=>{e&&cancelAnimationFrame(e)}}),[i,b]),(0,de.jsx)("canvas",{ref:s,width:360,height:280,className:"border border-gray-300 rounded-lg shadow-sm"})},je=async()=>{y(!1),x.current=!1,E&&(clearInterval(E),N(null));try{await fetch("".concat(fe,"/stop-continuous-prediction"),{method:"POST"})}catch(e){console.error("Error stopping continuous prediction:",e)}};return(0,e.useEffect)((()=>{"prediction"===t&&u&&ye()}),[t,u]),(0,e.useEffect)((()=>()=>{E&&clearInterval(E)}),[E]),(0,de.jsxs)("div",{className:"App",children:["upload"===t&&(0,de.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:(0,de.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,de.jsx)("h1",{className:"text-4xl font-bold text-center mb-8 text-gray-800",children:"\ud83d\ude80 Real-Time Graph Prediction"}),(0,de.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[(0,de.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-gray-700",children:"Upload Your Data"}),(0,de.jsxs)("div",o(o({},ve()),{},{className:"border-2 border-dashed rounded-lg p-12 text-center cursor-pointer transition-colors\n              ".concat(ge?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[(0,de.jsx)("input",o({},he())),(0,de.jsxs)("div",{className:"text-gray-600",children:[(0,de.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcca"}),ge?(0,de.jsx)("p",{className:"text-lg",children:"Drop the file here..."}):(0,de.jsxs)("div",{children:[(0,de.jsx)("p",{className:"text-lg mb-2",children:"Drag and drop your data file here, or click to browse"}),(0,de.jsx)("p",{className:"text-sm text-gray-500",children:"Supports CSV, Excel files"})]})]})]})),i&&(0,de.jsxs)("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg",children:[(0,de.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\ud83d\udcc8 Data Analysis"}),(0,de.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,de.jsxs)("div",{children:[(0,de.jsxs)("p",{children:[(0,de.jsx)("strong",{children:"File:"})," ",a.analysis.columns.length," columns, ",a.analysis.data_shape[0]," rows"]}),(0,de.jsxs)("p",{children:[(0,de.jsx)("strong",{children:"Time columns:"})," ",i.time_columns.join(", ")||"None detected"]}),(0,de.jsxs)("p",{children:[(0,de.jsx)("strong",{children:"Numeric columns:"})," ",i.numeric_columns.join(", ")||"None detected"]})]}),(0,de.jsxs)("div",{children:[(0,de.jsxs)("p",{children:[(0,de.jsx)("strong",{children:"Suggested target:"})," ",i.suggested_parameters.target_column||"None"]}),(0,de.jsxs)("p",{children:[(0,de.jsx)("strong",{children:"Suggested time:"})," ",i.suggested_parameters.time_column||"None"]})]})]})]})]})]})}),"parameters"===t&&(0,de.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:(0,de.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,de.jsx)("h1",{className:"text-4xl font-bold text-center mb-8 text-gray-800",children:"\u2699\ufe0f Configure Model Parameters"}),(0,de.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[(0,de.jsx)("div",{className:"mb-6",children:(0,de.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,de.jsx)("input",{type:"checkbox",checked:ee,onChange:e=>te(e.target.checked),className:"mr-2"}),(0,de.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\ud83d\ude80 Enable Advanced ML Models (DLinear, N-BEATS, LSTM, Ensemble)"})]})}),J&&(0,de.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[(0,de.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"\ud83d\udcca Data Quality Report"}),(0,de.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,de.jsxs)("div",{children:[(0,de.jsx)("span",{className:"font-medium",children:"Quality Score:"}),(0,de.jsxs)("span",{className:"ml-2 px-2 py-1 rounded ".concat(J.validation_results.quality_score>=80?"bg-green-100 text-green-800":J.validation_results.quality_score>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[J.validation_results.quality_score.toFixed(1),"%"]})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)("span",{className:"font-medium",children:"Total Rows:"}),(0,de.jsx)("span",{className:"ml-2",children:J.validation_results.total_rows})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)("span",{className:"font-medium",children:"Missing Values:"}),(0,de.jsx)("span",{className:"ml-2",children:Object.values(J.validation_results.missing_values).reduce(((e,t)=>e+t),0)})]})]}),J.recommendations&&J.recommendations.length>0&&(0,de.jsxs)("div",{className:"mt-2",children:[(0,de.jsx)("span",{className:"font-medium text-blue-800",children:"Recommendations:"}),(0,de.jsx)("ul",{className:"list-disc list-inside text-sm text-blue-700 mt-1",children:J.recommendations.slice(0,3).map(((e,t)=>(0,de.jsx)("li",{children:e},t)))})]})]}),(0,de.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,de.jsxs)("div",{children:[(0,de.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Column"}),(0,de.jsxs)("select",{value:s.time_column||"",onChange:e=>c(o(o({},s),{},{time_column:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,de.jsx)("option",{value:"",children:"Select time column"}),null===i||void 0===i?void 0:i.time_columns.map((e=>(0,de.jsx)("option",{value:e,children:e},e)))]})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Column"}),(0,de.jsxs)("select",{value:s.target_column||"",onChange:e=>c(o(o({},s),{},{target_column:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,de.jsx)("option",{value:"",children:"Select target column"}),null===i||void 0===i?void 0:i.numeric_columns.map((e=>(0,de.jsx)("option",{value:e,children:e},e)))]})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model Type"}),(0,de.jsxs)("select",{value:s.model_type||"prophet",onChange:e=>c(o(o({},s),{},{model_type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,de.jsx)("option",{value:"prophet",children:"Prophet (Traditional)"}),(0,de.jsx)("option",{value:"arima",children:"ARIMA (Traditional)"}),ee&&K.advanced_models&&K.advanced_models.map((e=>(0,de.jsxs)("option",{value:e,children:[e.toUpperCase()," (Advanced)"]},e)))]})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prediction Horizon"}),(0,de.jsx)("input",{type:"number",value:s.prediction_horizon||30,onChange:e=>c(o(o({},s),{},{prediction_horizon:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"365"})]}),ee&&(0,de.jsxs)(de.Fragment,{children:[(0,de.jsxs)("div",{children:[(0,de.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sequence Length"}),(0,de.jsx)("input",{type:"number",value:s.seq_len||50,onChange:e=>c(o(o({},s),{},{seq_len:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"10",max:"200"})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Training Epochs"}),(0,de.jsx)("input",{type:"number",value:s.epochs||100,onChange:e=>c(o(o({},s),{},{epochs:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"10",max:"500"})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Learning Rate"}),(0,de.jsx)("input",{type:"number",step:"0.001",value:s.learning_rate||.001,onChange:e=>c(o(o({},s),{},{learning_rate:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0.0001",max:"0.1"})]}),(0,de.jsxs)("div",{children:[(0,de.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batch Size"}),(0,de.jsxs)("select",{value:s.batch_size||32,onChange:e=>c(o(o({},s),{},{batch_size:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,de.jsx)("option",{value:16,children:"16"}),(0,de.jsx)("option",{value:32,children:"32"}),(0,de.jsx)("option",{value:64,children:"64"})]})]})]})]}),ee&&(0,de.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,de.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"\ud83d\udd27 Advanced Actions"}),(0,de.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,de.jsx)("button",{onClick:()=>(async e=>{ie(!0);try{const t=await fetch("".concat(fe,"/optimize-hyperparameters?model_type=").concat(e,"&n_trials=20"),{method:"POST"});if(t.ok){const e=await t.json();se("Hyperparameter optimization completed! Best parameters: ".concat(JSON.stringify(e.best_parameters),", Best score: ").concat(e.best_score.toFixed(4)),"success")}}catch(t){console.error("Error optimizing hyperparameters:",t)}finally{ie(!1)}})(s.model_type),disabled:re||!s.model_type,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 transition-colors text-sm",children:re?"\ud83d\udd04 Optimizing...":"\u26a1 Optimize Hyperparameters"}),(0,de.jsx)("button",{onClick:pe,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"\ud83d\udcca Compare Models"})]})]}),(0,de.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,de.jsx)("button",{onClick:()=>n("upload"),className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"\u2190 Back"}),(0,de.jsx)("button",{onClick:be,disabled:h||!s.time_column||!s.target_column,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors",children:h?"\ud83d\udd04 Training...":"\ud83d\ude80 Train Model"})]})]})]})}),"prediction"===t&&(0,de.jsx)("div",{className:"min-h-screen bg-gray-100 p-4",children:(0,de.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,de.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,de.jsxs)("div",{className:"flex justify-between items-center",children:[(0,de.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"pH Monitoring Dashboard"}),(0,de.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,de.jsx)("span",{className:"text-sm text-gray-600",children:"Real-time pH sensor monitoring with LSTM predictions"}),(0,de.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,de.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,de.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Connected"})]})]})]})}),(0,de.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,de.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,de.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,de.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Real-time pH Sensor Readings"}),(0,de.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Live"})]}),(0,de.jsx)("div",{className:"mb-4",children:d&&d.values&&d.values.length>0?(0,de.jsx)(Se,{data:d.values.slice(-w),title:"Historical Data",color:"#3B82F6",showAnimation:!1,smoothLevel:"medium"}):D.length>0?(0,de.jsx)(Se,{data:D.map((e=>e.ph_value)),title:"Real-time pH Readings",color:"#3B82F6",showAnimation:b,currentValue:C.current_ph,smoothLevel:"medium"}):(0,de.jsx)("div",{className:"border border-gray-300 rounded h-64 flex items-center justify-center text-gray-500",children:(0,de.jsxs)("div",{className:"text-center",children:[(0,de.jsx)("div",{className:"text-6xl mb-2",children:"\ud83d\udcca"}),(0,de.jsx)("p",{children:"No sensor data available"})]})})})]}),(0,de.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,de.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,de.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"pH Control Panel"}),(0,de.jsx)("button",{onClick:()=>n("parameters"),className:"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded hover:bg-gray-200",children:"\u2190 Back"})]}),(0,de.jsxs)("div",{className:"text-center mb-6",children:[(0,de.jsx)("div",{className:"text-5xl font-bold text-blue-600 mb-2",children:C.current_ph.toFixed(2)}),(0,de.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Current pH Level"}),(0,de.jsxs)("div",{className:"text-sm text-gray-500",children:["Target pH: ",C.target_ph]})]}),(0,de.jsxs)("div",{className:"mb-6",children:[(0,de.jsx)("div",{className:"flex justify-center mb-4",children:(0,de.jsxs)("div",{className:"relative",children:[(0,de.jsx)("div",{className:"w-4 h-64 bg-gradient-to-t from-red-500 via-yellow-500 to-green-500 rounded-full"}),(0,de.jsx)("div",{className:"absolute w-6 h-6 bg-blue-600 rounded-full border-2 border-white shadow-lg transform -translate-x-1 transition-all duration-300",style:{top:"".concat((14-C.current_ph)/14*100,"%"),marginTop:"-12px"}}),(0,de.jsx)("div",{className:"absolute w-4 h-4 bg-orange-500 rounded-full border-2 border-white shadow-md transform -translate-x-0.5 transition-all duration-300",style:{top:"".concat((14-_)/14*100,"%"),marginTop:"-8px"}})]})}),(0,de.jsx)("div",{className:"flex justify-center mb-4",children:(0,de.jsx)("div",{className:"relative",children:(0,de.jsx)("input",{type:"range",min:"0",max:"14",step:"0.1",value:_,onChange:e=>{(async e=>{P(e),O(!0);try{(await fetch("".concat(fe,"/set-ph-target"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({target_ph:e})})).ok&&z((t=>o(o({},t),{},{target_ph:e})))}catch(t){console.error("Error setting pH target:",t)}finally{O(!1)}})(parseFloat(e.target.value))},className:"w-64 h-4 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-vertical",style:{transform:"rotate(-90deg)",transformOrigin:"center"}})})}),(0,de.jsxs)("div",{className:"text-center",children:[(0,de.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"pH Scale"}),(0,de.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mb-2",children:[(0,de.jsx)("span",{children:"0"}),(0,de.jsx)("span",{children:"7"}),(0,de.jsx)("span",{children:"14"})]}),(0,de.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,de.jsx)("span",{className:"inline-block w-3 h-3 bg-blue-600 rounded-full mr-1"}),"Current: ",C.current_ph.toFixed(2),(0,de.jsx)("span",{className:"mx-2",children:"|"}),(0,de.jsx)("span",{className:"inline-block w-3 h-3 bg-orange-500 rounded-full mr-1"}),"Target: ",_.toFixed(1),T&&(0,de.jsx)("span",{className:"ml-2 text-blue-500",children:"Adjusting..."})]})]})]}),(0,de.jsxs)("div",{className:"space-y-3",children:[(0,de.jsx)("button",{onClick:async()=>{await me(),await ke();const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!u)return se("No model available: Please train a model first before generating predictions.","error"),null;try{const n=await fetch("".concat(fe,"/generate-advanced-ph-prediction?steps=30&maintain_patterns=true"));if(n.ok){const e=await n.json();return console.log("Advanced pH prediction result:",e),e}const a=await fetch("".concat(fe,"/generate-prediction?model_id=").concat(u,"&steps=30&offset=").concat(e));if(a.ok)return await a.json();{let n="Prediction generation failed";try{const e=await a.json();e.detail?n="Prediction failed: ".concat(e.detail):e.error?n="Prediction failed: ".concat(e.error):e.message&&(n="Prediction failed: ".concat(e.message))}catch(t){n="Prediction failed: HTTP ".concat(a.status," - ").concat(a.statusText)}se(n,"error"),console.error("Prediction generation failed:",{status:a.status,statusText:a.statusText,modelId:u,window:e})}}catch(n){console.error("Error generating predictions:",n);let e="Prediction generation failed";e="TypeError"===n.name&&n.message.includes("fetch")?"Network error: Unable to connect to server. Please check your internet connection.":"TypeError"===n.name&&n.message.includes("JSON")?"Server response error: Invalid response format.":n.message.includes("timeout")?"Prediction timeout: Generation took too long. Please try again.":n.message.includes("abort")?"Prediction cancelled: Generation was interrupted.":"Prediction failed: ".concat(n.message),se(e,"error")}return null}(0);e&&e.predictions&&(v(e),F(e.predictions))},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\ud83d\udcc8 Generate Predictions"}),b?(0,de.jsx)("button",{onClick:je,className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"\u23f9\ufe0f Stop Continuous Prediction"}):(0,de.jsx)("button",{onClick:async()=>{await me(),(async()=>{y(!0),x.current=!0,j([]),await ye();try{await fetch("".concat(fe,"/reset-continuous-prediction"),{method:"POST"}),await fetch("".concat(fe,"/start-continuous-prediction"),{method:"POST"});const e=await we();e&&(v(e),F(e.predictions||[]));const t=setInterval((async()=>{try{if(x.current){const e=await fetch("".concat(fe,"/extend-advanced-ph-prediction?additional_steps=5"));if(e.ok){const t=await e.json();Q(t),v(t)}else{const e=await fetch("".concat(fe,"/extend-prediction?steps=5"));if(e.ok){const t=await e.json();Q(t),v(t)}}const t=await fetch("".concat(fe,"/ph-simulation"));if(t.ok){const e=await t.json();z((t=>o(o({},t),{},{current_ph:e.ph_value}))),L((t=>[...t,e].slice(-w)))}}}catch(e){console.error("Error in continuous prediction loop:",e)}}),2e3);N(t)}catch(e){console.error("Error starting continuous prediction:",e)}})()},className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"\u25b6\ufe0f Start Continuous Prediction"})]}),(0,de.jsxs)("div",{className:"mt-6",children:[(0,de.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Window Control"}),(0,de.jsx)("input",{type:"range",min:"20",max:"200",value:w,onChange:e=>k(Number(e.target.value)),className:"w-full"}),(0,de.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,de.jsx)("span",{children:"20 pts"}),(0,de.jsxs)("span",{children:[w," pts"]}),(0,de.jsx)("span",{children:"200 pts"})]})]}),(0,de.jsx)("div",{className:"mt-4",children:(0,de.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,de.jsx)("input",{type:"checkbox",checked:$,onChange:e=>W(e.target.checked),className:"mr-2"}),(0,de.jsx)("span",{className:"text-sm text-gray-700",children:"\ud83c\udf9b\ufe0f Enhanced Visual Smoothing (reduces noise in graph lines)"})]})})]}),(0,de.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,de.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,de.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Slider-Responsive Graph"}),(0,de.jsx)("span",{className:"text-sm text-gray-600",children:"Follows pH Slider"})]}),(0,de.jsx)("div",{className:"mb-4",children:I.length>0?(0,de.jsx)(Se,{data:I,title:"pH Level: ".concat(_.toFixed(1)),color:"#10B981",showAnimation:!0,smoothLevel:"high"}):A.length>0?(0,de.jsx)(Se,{data:A.slice(-w),title:"LSTM Predictions",color:"#10B981",showAnimation:b,smoothLevel:"high"}):m&&m.predictions&&m.predictions.length>0?(0,de.jsx)(Se,{data:m.predictions.slice(-w),title:"Generated Predictions",color:"#10B981",showAnimation:!1,smoothLevel:"high"}):(0,de.jsx)("div",{className:"border border-gray-300 rounded h-64 flex items-center justify-center text-gray-500",children:(0,de.jsxs)("div",{className:"text-center",children:[(0,de.jsx)("div",{className:"text-6xl mb-2",children:"\ud83c\udfaf"}),(0,de.jsx)("p",{children:"Move the pH slider to see responsive graph"})]})})}),(0,de.jsxs)("div",{className:"text-center",children:[(0,de.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Current Target pH"}),(0,de.jsx)("div",{className:"text-2xl font-bold text-green-600",children:_.toFixed(1)})]}),(0,de.jsx)("div",{className:"mt-4 text-center",children:(0,de.jsxs)("div",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[(0,de.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Graph Synced with Slider"]})})]})]}),(0,de.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,de.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,de.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Historical Data"}),(0,de.jsx)("div",{className:"text-lg font-semibold text-blue-600",children:d?"".concat(d.values.length," points"):"No data"})]}),(0,de.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,de.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Realtime Readings"}),(0,de.jsxs)("div",{className:"text-lg font-semibold text-green-600",children:[D.length," points"]})]}),(0,de.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,de.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Predictions"}),(0,de.jsxs)("div",{className:"text-lg font-semibold text-purple-600",children:[A.length," points"]})]}),(0,de.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,de.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Time Window"}),(0,de.jsxs)("div",{className:"text-lg font-semibold text-indigo-600",children:[w," points"]})]})]})]})}),le.show&&(0,de.jsx)("div",{className:"fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ".concat("success"===le.type?"bg-green-100 border border-green-400 text-green-700":"error"===le.type?"bg-red-100 border border-red-400 text-red-700":"bg-blue-100 border border-blue-400 text-blue-700"),children:(0,de.jsxs)("div",{className:"flex items-center",children:[(0,de.jsxs)("div",{className:"mr-3",children:["success"===le.type&&(0,de.jsx)("div",{className:"text-2xl",children:"\u2705"}),"error"===le.type&&(0,de.jsx)("div",{className:"text-2xl",children:"\u274c"}),"info"===le.type&&(0,de.jsx)("div",{className:"text-2xl",children:"\u2139\ufe0f"})]}),(0,de.jsx)("div",{className:"flex-1",children:(0,de.jsx)("p",{className:"text-sm font-medium",children:le.message})}),(0,de.jsx)("button",{onClick:()=>oe({show:!1,message:"",type:"info"}),className:"ml-4 text-gray-400 hover:text-gray-600",children:(0,de.jsx)("div",{className:"text-lg",children:"\xd7"})})]})})]})};t.createRoot(document.getElementById("root")).render((0,de.jsx)(e.StrictMode,{children:(0,de.jsx)(me,{})}))})()})();
//# sourceMappingURL=main.1619d049.js.map